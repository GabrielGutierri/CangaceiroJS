{"version":3,"sources":["../../../app-src/domain/negociacao/NegociacaoDao.js"],"names":["Negociacao","NegociacaoDao","constructor","connection","_connection","_store","adiciona","negociacao","Promise","resolve","reject","request","transaction","objectStore","add","onsuccess","e","onerror","console","log","target","error","name","listaTodos","negociacoes","cursor","openCursor","atual","result","value","_data","_quantidade","_valor","push","continue","apagaTodos","clear"],"mappings":";;;;;;AAAQA,sB,iBAAAA,U;;;gBAEKC,a,GAAN,MAAMA,aAAN,CAAmB;AACtBC,4BAAYC,UAAZ,EAAuB;AACnB,yBAAKC,WAAL,GAAmBD,UAAnB;AACA,yBAAKE,MAAL,GAAc,aAAd;AACH;;AAEDC,yBAASC,UAAT,EAAoB;AAChB,2BAAO,IAAIC,OAAJ,CAAY,CAACC,OAAD,EAAUC,MAAV,KAAmB;AAClC,8BAAMC,UAAU,KAAKP,WAAL,CAAiBQ,WAAjB,CAA6B,CAAC,KAAKP,MAAN,CAA7B,EAA2C,WAA3C,EAAwDQ,WAAxD,CAAoE,KAAKR,MAAzE,EAAiFS,GAAjF,CAAqFP,UAArF,CAAhB;;AAEAI,gCAAQI,SAAR,GAAoBC,KAAGP,SAAvB;AACAE,gCAAQM,OAAR,GAAkBD,KAAG;AACjBE,oCAAQC,GAAR,CAAYH,EAAEI,MAAF,CAASC,KAArB;AACAX,mCAAOM,EAAEI,MAAF,CAASC,KAAT,CAAeC,IAAtB;AACH,yBAHD;AAIH,qBARM,CAAP;AASH;;AAEDC,6BAAY;AACR,2BAAO,IAAIf,OAAJ,CAAY,CAACC,OAAD,EAAUC,MAAV,KAAmB;AAClC,8BAAMc,cAAa,EAAnB;AACA,8BAAMC,SAAS,KAAKrB,WAAL,CAAiBQ,WAAjB,CAA6B,CAAC,KAAKP,MAAN,CAA7B,EAA2C,WAA3C,EACCQ,WADD,CACa,KAAKR,MADlB,EAC0BqB,UAD1B,EAAf;;AAGAD,+BAAOV,SAAP,GAAmBC,KAAI;AACnB,kCAAMW,QAAQX,EAAEI,MAAF,CAASQ,MAAvB;AACAV,oCAAQC,GAAR,CAAYQ,KAAZ;AACA,gCAAGA,KAAH,EAAS;AACL,sCAAMpB,aAAa,IAAIP,UAAJ,CACf2B,MAAME,KAAN,CAAYC,KADG,EAEfH,MAAME,KAAN,CAAYE,WAFG,EAGfJ,MAAME,KAAN,CAAYG,MAHG,CAAnB;;AAMAR,4CAAYS,IAAZ,CAAiB1B,UAAjB;AACAoB,sCAAMO,QAAN;AACH,6BATD,MAUI;AACAzB,wCAAQe,WAAR;AACH;AACJ,yBAhBD;;AAkBAC,+BAAOR,OAAP,GAAiBD,KAAG;AAChBE,oCAAQC,GAAR,CAAYH,EAAEI,MAAF,CAASC,KAArB;AACAX,mCAAOM,EAAEI,MAAF,CAASC,KAAT,CAAeC,IAAtB;AACH,yBAHD;AAIH,qBA3BM,CAAP;AA4BH;;AAEDa,6BAAY;AACR,2BAAO,IAAI3B,OAAJ,CAAY,CAACC,OAAD,EAAUC,MAAV,KAAmB;AAClC,8BAAMC,UAAU,KAAKP,WAAL,CAAiBQ,WAAjB,CAA6B,CAAC,KAAKP,MAAN,CAA7B,EAA2C,WAA3C,EACCQ,WADD,CACa,KAAKR,MADlB,EAEC+B,KAFD,EAAhB;AAGAzB,gCAAQI,SAAR,GAAoBC,KAAIP,SAAxB;AACAE,gCAAQM,OAAR,GAAkBD,KAAI;AAClBE,oCAAQC,GAAR,CAAYH,EAAEI,MAAF,CAASC,KAArB;AACAX,mCAAOM,EAAEI,MAAF,CAASC,KAAT,CAAeC,IAAtB;AACH,yBAHD;AAIH,qBATM,CAAP;AAUH;AA5DqB,a","file":"NegociacaoDao.js","sourcesContent":["import {Negociacao} from './Negociacao.js';\r\n\r\nexport class NegociacaoDao{\r\n    constructor(connection){\r\n        this._connection = connection;\r\n        this._store = 'negociacoes';\r\n    }\r\n\r\n    adiciona(negociacao){\r\n        return new Promise((resolve, reject)=>{\r\n            const request = this._connection.transaction([this._store],'readwrite').objectStore(this._store).add(negociacao);\r\n                            \r\n            request.onsuccess = e=>resolve();\r\n            request.onerror = e=>{\r\n                console.log(e.target.error);\r\n                reject(e.target.error.name);\r\n            }\r\n        });\r\n    }\r\n\r\n    listaTodos(){\r\n        return new Promise((resolve, reject)=>{\r\n            const negociacoes= [];\r\n            const cursor = this._connection.transaction([this._store],'readwrite')\r\n                           .objectStore(this._store).openCursor();\r\n            \r\n            cursor.onsuccess = e=> {\r\n                const atual = e.target.result;\r\n                console.log(atual);\r\n                if(atual){\r\n                    const negociacao = new Negociacao(\r\n                        atual.value._data,\r\n                        atual.value._quantidade,\r\n                        atual.value._valor\r\n                    )\r\n\r\n                    negociacoes.push(negociacao);\r\n                    atual.continue();\r\n                }\r\n                else{\r\n                    resolve(negociacoes);\r\n                }\r\n            };\r\n\r\n            cursor.onerror = e=>{\r\n                console.log(e.target.error);\r\n                reject(e.target.error.name);\r\n            }\r\n        });\r\n    }\r\n\r\n    apagaTodos(){\r\n        return new Promise((resolve, reject)=>{\r\n            const request = this._connection.transaction([this._store],'readwrite')\r\n                            .objectStore(this._store)\r\n                            .clear();\r\n            request.onsuccess = e=> resolve();\r\n            request.onerror = e=> {\r\n                console.log(e.target.error);\r\n                reject(e.target.error.name);\r\n            }\r\n        })\r\n    }\r\n}"]}